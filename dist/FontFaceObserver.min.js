!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.FontFaceObserver=b()}(this,function(){"use strict";var a={};a.supportsAddEventListener=function(){return!!document.addEventListener},a.createElement=function(a){return document.createElement(a)},a.createText=function(a){return document.createTextNode(a)},a.style=function(a,b){a.style.cssText=b},a.append=function(a,b){a.appendChild(b)},a.remove=function(a,b){a.removeChild(b)},a.hasClass=function(a,b){return a.className.split(/\s+/).indexOf(b)!==-1},a.addClass=function(b,c){a.hasClass(b,c)||(b.className+=" "+c)},a.removeClass=function(b,c){if(a.hasClass(b,c)){var d=b.className.split(/\s+/),e=d.indexOf(c);d.splice(e,1),b.className=d.join(" ")}},a.replaceClass=function(b,c,d){if(a.hasClass(b,c)){var e=b.className.split(/\s+/),f=e.indexOf(c);e[f]=d,b.className=e.join(" ")}},a.addListener=function(b,c,d){a.supportsAddEventListener()?b.addEventListener(c,d,!1):b.attachEvent(c,d)},a.waitForBody=function(b){document.body?b():a.supportsAddEventListener()?document.addEventListener("DOMContentLoaded",function a(){document.removeEventListener("DOMContentLoaded",a),b()}):document.attachEvent("onreadystatechange",function a(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",a),b())})};var b={};b.Ruler=function(b){var c="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.element=a.createElement("div"),this.element.setAttribute("aria-hidden","true"),a.append(this.element,a.createText(b)),this.collapsible=a.createElement("span"),this.expandable=a.createElement("span"),this.collapsibleInner=a.createElement("span"),this.expandableInner=a.createElement("span"),this.lastOffsetWidth=-1,a.style(this.collapsible,c),a.style(this.expandable,c),a.style(this.expandableInner,c),a.style(this.collapsibleInner,"display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;"),a.append(this.collapsible,this.collapsibleInner),a.append(this.expandable,this.expandableInner),a.append(this.element,this.collapsible),a.append(this.element,this.expandable)};var c=b.Ruler;c.prototype.getElement=function(){return this.element},c.prototype.setFont=function(b){a.style(this.element,"max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+b+";")},c.prototype.getWidth=function(){return this.element.offsetWidth},c.prototype.setWidth=function(a){this.element.style.width=a+"px"},c.prototype.reset=function(){var a=this.getWidth(),b=a+100;return this.expandableInner.style.width=b+"px",this.expandable.scrollLeft=b,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==a&&(this.lastOffsetWidth=a,!0)},c.prototype.onScroll=function(a){this.reset()&&null!==this.element.parentNode&&a(this.lastOffsetWidth)},c.prototype.onResize=function(b){function c(){d.onScroll(b)}var d=this;a.addListener(this.collapsible,"scroll",c),a.addListener(this.expandable,"scroll",c),this.reset()},b.Observer=function(a,b){var c=b||{};this.family=a,this.style=c.style||"normal",this.weight=c.weight||"normal",this.stretch=c.stretch||"normal"};var d=b.Observer;return d.HAS_WEBKIT_FALLBACK_BUG=null,d.SUPPORTS_STRETCH=null,d.SUPPORTS_NATIVE_FONT_LOADING=null,d.DEFAULT_TIMEOUT=3e3,d.getUserAgent=function(){return window.navigator.userAgent},d.hasWebKitFallbackBug=function(){if(null===d.HAS_WEBKIT_FALLBACK_BUG){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(d.getUserAgent());d.HAS_WEBKIT_FALLBACK_BUG=!!a&&(parseInt(a[1],10)<536||536===parseInt(a[1],10)&&parseInt(a[2],10)<=11)}return d.HAS_WEBKIT_FALLBACK_BUG},d.supportsNativeFontLoading=function(){return null===d.SUPPORTS_NATIVE_FONT_LOADING&&(d.SUPPORTS_NATIVE_FONT_LOADING=!!window.FontFace),d.SUPPORTS_NATIVE_FONT_LOADING},d.supportStretch=function(){if(null===d.SUPPORTS_STRETCH){var b=a.createElement("div");try{b.style.font="condensed 100px sans-serif"}catch(a){}d.SUPPORTS_STRETCH=""!==b.style.font}return d.SUPPORTS_STRETCH},d.prototype.getStyle=function(a){return[this.style,this.weight,d.supportStretch()?this.stretch:"","100px",a].join(" ")},d.prototype.getTime=function(){return(new Date).getTime()},d.prototype.load=function(b,e){var f=this,g=b||"BESbswy",h=e||d.DEFAULT_TIMEOUT,i=f.getTime();return new Promise(function(b,e){if(d.supportsNativeFontLoading()){var j=new Promise(function(a,b){var c=function(){var d=f.getTime();d-i>=h?b():document.fonts.load(f.getStyle(f.family),g).then(function(b){b.length>=1?a():setTimeout(c,25)},function(){b()})};c()}),k=new Promise(function(a,b){setTimeout(b,h)});Promise.race([k,j]).then(function(){b(f)},function(){e(f)})}else a.waitForBody(function(){function j(){null!==v.parentNode&&a.remove(v.parentNode,v)}function k(){if((p!=-1&&q!=-1||p!=-1&&r!=-1||q!=-1&&r!=-1)&&(p==q||p==r||q==r)){if(d.hasWebKitFallbackBug()&&(p==s&&q==s&&r==s||p==t&&q==t&&r==t||p==u&&q==u&&r==u))return;j(),clearTimeout(w),b(f)}}function l(){var a=f.getTime();if(a-i>=h)j(),e(f);else{var b=document.hidden;b!==!0&&void 0!==b||(p=m.getWidth(),q=n.getWidth(),r=o.getWidth(),k()),w=setTimeout(l,50)}}var m=new c(g),n=new c(g),o=new c(g),p=-1,q=-1,r=-1,s=-1,t=-1,u=-1,v=a.createElement("div"),w=0;v.dir="ltr",m.setFont(f.getStyle("sans-serif")),n.setFont(f.getStyle("serif")),o.setFont(f.getStyle("monospace")),a.append(v,m.getElement()),a.append(v,n.getElement()),a.append(v,o.getElement()),a.append(document.body,v),s=m.getWidth(),t=n.getWidth(),u=o.getWidth(),l(),m.onResize(function(a){p=a,k()}),m.setFont(f.getStyle('"'+f.family+'",sans-serif')),n.onResize(function(a){q=a,k()}),n.setFont(f.getStyle('"'+f.family+'",serif')),o.onResize(function(a){r=a,k()}),o.setFont(f.getStyle('"'+f.family+'",monospace'))})})},b.Observer});